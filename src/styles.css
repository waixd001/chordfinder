@import "tailwindcss";

@theme {
	--font-family-sans: "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Noto Sans TC", sans-serif;
	--color-pearl: #f4f5f7;
	--color-ink: #1b1d20;
	--color-frost: rgba(255, 255, 255, 0.75);
	--shadow-soft: 0 20px 60px rgba(15, 23, 42, 0.12);
	--shadow-glow: 0 0 35px rgba(31, 41, 55, 0.18);
}

@layer base {
	body {
		font-family: var(--font-family-sans);
		background: radial-gradient(circle at top left, #ffffff 0%, #f4f5f7 45%, #eceff3 100%);
	}

	a {
		text-decoration: none;
	}
}

@layer components {
	.glass-card {
		@apply relative rounded-[28px] border border-white/60 bg-white/75 p-8 shadow-[var(--shadow-soft)] backdrop-blur-2xl sm:p-12;
	}

	.input-field {
		@apply w-full rounded-2xl border border-white/80 bg-white/80 px-5 py-4 text-base text-ink shadow-[0_10px_25px_rgba(15,23,42,0.08)] outline-none transition duration-200 placeholder:text-ink/40 focus:border-white focus:ring-2 focus:ring-ink/10 focus:ring-offset-2 focus:ring-offset-white/50;
	}

	.select-arrow {
		@apply pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 text-sm text-ink/50;
	}

	.mode-toggle {
		@apply grid grid-cols-2 rounded-2xl border border-white/70 bg-white/70 p-1 shadow-[0_12px_25px_rgba(15,23,42,0.06)];
		transition: all 0.3s ease;
	}

	.mode-toggle__button {
		@apply rounded-2xl m-1 px-4 py-3 text-sm font-semibold uppercase tracking-[0.2em] text-ink/50 transition hover:text-ink;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.mode-toggle__button.is-active {
		@apply bg-ink text-white shadow-[0_12px_20px_rgba(15,23,42,0.2)];
		transform: scale(1.05);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.input-mode-toggle {
		@apply grid grid-cols-2 rounded-2xl border border-white/70 bg-white/70 p-1 shadow-[0_12px_25px_rgba(15,23,42,0.06)];
		transition: all 0.3s ease;
	}

	.input-mode-toggle__button {
		@apply rounded-2xl mx-1.5 px-5 py-2.5 text-sm font-semibold uppercase tracking-[0.2em] text-ink/50 transition hover:text-ink;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.input-mode-toggle__button.is-active {
		@apply bg-ink text-white shadow-[0_12px_20px_rgba(15,23,42,0.2)];
		transform: scale(1.05);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.input-glow {
		@apply pointer-events-none absolute inset-0 rounded-2xl opacity-0 transition duration-300;
		box-shadow: 0 0 35px rgba(31, 41, 55, 0.2);
	}

	.input-field:focus + .input-glow {
		@apply opacity-100;
	}

	.result-card {
		@apply rounded-3xl border border-white/70 bg-white/65 p-6 shadow-[0_18px_45px_rgba(15,23,42,0.08)] backdrop-blur-xl sm:p-8;
	}

	.pill-button {
		@apply rounded-full border border-ink/10 bg-ink px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:-translate-y-0.5 hover:shadow-[0_10px_20px_rgba(15,23,42,0.12)] focus:outline-none focus:ring-2 focus:ring-ink/20 focus:ring-offset-2 focus:ring-offset-white/50;
	}

	.pill-button--ghost {
		@apply bg-transparent text-ink/70 hover:text-ink;
	}

	.pill-button--soft {
		@apply bg-ink/10 text-ink hover:bg-ink hover:text-white;
	}

	.list-stack {
		@apply space-y-3;
	}

	.list-item {
		@apply flex items-center justify-between gap-3 rounded-2xl border border-white/70 bg-white/80 px-4 py-3 text-sm text-ink/80 shadow-[0_12px_25px_rgba(15,23,42,0.06)];
	}

	.list-item--stack {
		@apply flex-col items-start;
	}

	.history-button {
		@apply rounded-full border border-ink/10 m-1 bg-white/40 px-4 py-2 text-xs font-medium text-ink/80 backdrop-blur-sm transition hover:bg-white/60 hover:text-ink active:scale-95 focus:outline-none focus:ring-2 focus:ring-ink/20 focus:ring-offset-2 focus:ring-offset-white/50;
	}

	.icon-button {
		@apply rounded-full border border-ink/10 bg-transparent px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.2em] text-ink/55 transition hover:border-ink/20 hover:text-ink focus:outline-none focus:ring-2 focus:ring-ink/20 focus:ring-offset-2 focus:ring-offset-white/50;
	}

	.chip-stack {
		@apply flex flex-wrap gap-2;
	}

	.chip {
		@apply relative flex items-center gap-2 rounded-full bg-ink/10 pl-2 pr-3 py-1 text-xs font-semibold tracking-[0.2em] text-ink/70 transition-all duration-200;
	}

	.chip--green {
		@apply bg-green-500/15 ring-1 ring-green-500/30 text-green-700/90;
	}

	.chip--blue {
		@apply bg-blue-500/15 ring-1 ring-blue-500/30 text-blue-700/90;
	}

	.chip--red {
		@apply bg-red-500/15 ring-1 ring-red-500/30 text-red-700/90;
	}

	/* 借用和弦 - 虛線邊框 */
	.chip--borrowed {
		border-style: dashed;
		border-width: 2px;
	}

	/* 副屬和弦 - 特殊標記已在 romanBadge 中添加 */
	.chip--secondary {
		/* 可選：添加額外樣式 */
	}

	.chip-content {
		@apply flex items-center gap-1.5;
	}

	.chip-roman {
		@apply inline-flex items-center justify-center w-5 h-5 text-[10px] font-bold rounded-full bg-white/90 text-ink/90 border border-ink/10 shadow-sm;
	}

	.chip-text {
		@apply tracking-[0.2em];
	}

	.drag-handle {
		@apply cursor-grab active:cursor-grabbing flex items-center justify-center w-4 h-4 text-ink/30 hover:text-ink/60 transition-colors;
	}

	.drag-handle--list {
		@apply absolute right-4 top-4 w-6 h-6 text-ink/20 hover:text-ink/40;
	}

	.list-item--stack {
		@apply flex-col items-start relative;
	}

	.list-item-text {
		@apply pr-8;
	}

	.drag-ghost {
		@apply opacity-40 scale-95 grayscale;
	}

	.drag-chosen {
		@apply shadow-lg ring-2 ring-ink/10 bg-white/90;
	}

	.drag-item {
		@apply opacity-100;
	}

	.empty-state {
		@apply rounded-2xl border border-dashed border-ink/15 bg-white/60 px-4 py-4 text-xs uppercase tracking-[0.2em] text-ink/40;
	}

	.glow-orb {
		@apply absolute rounded-full blur-3xl;
		background: radial-gradient(circle, rgba(90, 106, 255, 0.2), rgba(90, 106, 255, 0));
		filter: blur(60px);
	}

	.glow-orb--one {
		@apply left-[-12%] top-[-10%] h-[320px] w-[320px];
	}

	.glow-orb--two {
		@apply right-[-10%] top-[10%] h-[420px] w-[420px];
		background: radial-gradient(circle, rgba(61, 201, 166, 0.22), rgba(61, 201, 166, 0));
	}

	.glow-orb--three {
		@apply bottom-[-18%] left-[20%] h-[380px] w-[380px];
		background: radial-gradient(circle, rgba(255, 199, 94, 0.18), rgba(255, 199, 94, 0));
	}

	.history-scroll-container {
		@apply overflow-x-auto flex-1 min-w-0;
		scrollbar-width: none; /* Firefox */
		-ms-overflow-style: none; /* Internet Explorer 10+ */
		-webkit-overflow-scrolling: touch; /* 改善 iOS 滾動 */
	}
	.history-scroll-container::-webkit-scrollbar {
		display: none; /* Safari and Chrome */
	}
	#historyButtons {
		@apply flex gap-2 flex-nowrap;
		min-width: min-content;
	}

	/* Progression Window - Apple Style Floating Window */
	.progression-window {
		position: fixed;
		width: 520px;
		height: 640px;
		min-width: 360px;
		min-height: 280px;
		max-width: 90vw;
		background: rgba(255, 255, 255, 0.72);
		backdrop-filter: blur(20px) saturate(180%);
		-webkit-backdrop-filter: blur(20px) saturate(180%);
		border-radius: 20px;
		border: 1px solid rgba(255, 255, 255, 0.4);
		box-shadow:
			0 22px 70px rgba(0, 0, 0, 0.12),
			0 8px 22px rgba(0, 0, 0, 0.08),
			inset 0 0 0 1px rgba(255, 255, 255, 0.4);
		z-index: 50;
		display: flex;
		flex-direction: column;
		overflow: hidden;
	}

	.progression-window-header {
		@apply flex items-center justify-between px-6 py-5 select-none;
		cursor: move;
		background: linear-gradient(to bottom, rgba(255, 255, 255, 0.5), rgba(255, 255, 255, 0.2));
		border-bottom: 1px solid rgba(255, 255, 255, 0.3);
		border-radius: 20px 20px 0 0;
	}

	.progression-window.dragging .progression-window-header {
		cursor: grabbing;
		background: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.3));
	}

	.progression-window.resizing {
		transition: none;
	}

	.progression-window-title {
		@apply text-sm font-semibold text-ink/80 tracking-wide;
	}

	.progression-window-content {
		@apply flex-1 overflow-y-auto p-6;
		scrollbar-width: thin;
		scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
	}

	.progression-window-content::-webkit-scrollbar {
		width: 6px;
	}

	.progression-window-content::-webkit-scrollbar-track {
		background: transparent;
	}

	.progression-window-content::-webkit-scrollbar-thumb {
		@apply rounded-full;
		background: rgba(0, 0, 0, 0.15);
	}

	.progression-window-content::-webkit-scrollbar-thumb:hover {
		background: rgba(0, 0, 0, 0.25);
	}

	.progression-window-close {
		@apply flex h-7 w-7 items-center justify-center rounded-full text-lg font-medium transition active:scale-90;
		color: rgba(0, 0, 0, 0.4);
		background: rgba(0, 0, 0, 0.05);
	}

	.progression-window-close:hover {
		background: rgba(0, 0, 0, 0.1);
		color: rgba(0, 0, 0, 0.7);
	}

	.progression-resize-handle {
		position: absolute;
		bottom: 0;
		right: 0;
		width: 36px;
		height: 36px;
		cursor: se-resize;
		z-index: 10;
		border-radius: 20px 0 20px 0;
		background: rgba(255, 255, 255, 0.5);
		backdrop-filter: blur(4px);
		-webkit-backdrop-filter: blur(4px);
		transition: background 0.2s ease;
	}

	.progression-resize-handle::before {
		content: "";
		position: absolute;
		bottom: 10px;
		right: 10px;
		width: 14px;
		height: 14px;
		border-right: 2.5px solid rgba(140, 140, 150, 0.7);
		border-bottom: 2.5px solid rgba(140, 140, 150, 0.7);
		border-radius: 0 0 20px 0;
		transition: all 0.2s ease;
	}

	.progression-resize-handle:hover {
		background: rgba(255, 255, 255, 0.9);
	}

	.progression-resize-handle:hover::before {
		border-color: rgba(80, 80, 90, 0.9);
		width: 16px;
		height: 16px;
	}

	/* 移動端響應式設計 */
	@media (max-width: 640px) {
		.progression-window {
			width: 100%;
			max-width: 100%;
			bottom: 0;
			left: 0;
			right: 0;
			border-radius: 20px 20px 0 0;
			box-shadow:
				0 -8px 40px rgba(0, 0, 0, 0.15),
				inset 0 0 0 1px rgba(255, 255, 255, 0.4);
		}

		.progression-window-header {
			border-radius: 20px 20px 0 0;
		}

		.progression-resize-handle {
			display: none;
		}
	}

	.fab {
		@apply fixed bottom-6 right-6 w-14 h-14 rounded-full 
			   bg-gradient-to-br from-violet-500 to-fuchsia-600 
			   text-white shadow-lg shadow-violet-500/30
			   flex items-center justify-center
			   transition-all duration-200 ease-out
			   hover:scale-110 hover:shadow-xl hover:shadow-violet-500/40
			   active:scale-95;
		z-index: 50;
	}

	.fab-icon {
		@apply w-6 h-6;
	}

	@media (max-width: 640px) {
		.fab {
			@apply bottom-4 right-4 w-12 h-12;
		}
		.fab-icon {
			@apply w-5 h-5;
		}
	}
}
