@import "tailwindcss";

@theme {
	--font-family-sans: "SF Pro Display", "SF Pro Text", "Helvetica Neue", "Noto Sans TC", sans-serif;
	--color-pearl: #f4f5f7;
	--color-ink: #1b1d20;
	--color-frost: rgba(255, 255, 255, 0.75);
	--shadow-soft: 0 20px 60px rgba(15, 23, 42, 0.12);
	--shadow-glow: 0 0 35px rgba(31, 41, 55, 0.18);
}

@layer base {
	body {
		font-family: var(--font-family-sans);
		background: radial-gradient(circle at top left, #ffffff 0%, #f4f5f7 45%, #eceff3 100%);
	}

	a {
		text-decoration: none;
	}
}

@layer components {
	.glass-card {
		@apply relative rounded-[28px] border border-white/60 bg-white/75 p-8 shadow-[var(--shadow-soft)] backdrop-blur-2xl sm:p-12;
	}

	.input-field {
		@apply w-full rounded-2xl border border-white/80 bg-white/80 px-5 py-4 text-base text-ink shadow-[0_10px_25px_rgba(15,23,42,0.08)] outline-none transition duration-200 placeholder:text-ink/40 focus:border-white focus:ring-2 focus:ring-ink/10 focus:ring-offset-2 focus:ring-offset-white/50;
	}

	.select-arrow {
		@apply pointer-events-none absolute right-4 top-1/2 -translate-y-1/2 text-sm text-ink/50;
	}

	.mode-toggle {
		@apply grid grid-cols-2 rounded-2xl border border-white/70 bg-white/70 p-1 shadow-[0_12px_25px_rgba(15,23,42,0.06)];
		transition: all 0.3s ease;
	}

	.mode-toggle__button {
		@apply rounded-2xl m-1 px-4 py-3 text-sm font-semibold uppercase tracking-[0.2em] text-ink/50 transition hover:text-ink;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.mode-toggle__button.is-active {
		@apply bg-ink text-white shadow-[0_12px_20px_rgba(15,23,42,0.2)];
		transform: scale(1.05);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.input-glow {
		@apply pointer-events-none absolute inset-0 rounded-2xl opacity-0 transition duration-300;
		box-shadow: 0 0 35px rgba(31, 41, 55, 0.2);
	}

	.input-field:focus + .input-glow {
		@apply opacity-100;
	}

	.result-card {
		@apply rounded-3xl border border-white/70 bg-white/65 p-6 shadow-[0_18px_45px_rgba(15,23,42,0.08)] backdrop-blur-xl sm:p-8;
	}

	.pill-button {
		@apply rounded-full border border-ink/10 bg-ink px-4 py-2 text-xs font-semibold uppercase tracking-[0.2em] text-white transition hover:-translate-y-0.5 hover:shadow-[0_10px_20px_rgba(15,23,42,0.12)] focus:outline-none focus:ring-2 focus:ring-ink/20 focus:ring-offset-2 focus:ring-offset-white/50;
	}

	.pill-button--ghost {
		@apply bg-transparent text-ink/70 hover:text-ink;
	}

	.pill-button--soft {
		@apply bg-ink/10 text-ink hover:bg-ink hover:text-white;
	}

	.list-stack {
		@apply space-y-3;
	}

	.list-item {
		@apply flex items-center justify-between gap-3 rounded-2xl border border-white/70 bg-white/80 px-4 py-3 text-sm text-ink/80 shadow-[0_12px_25px_rgba(15,23,42,0.06)];
	}

	.list-item--stack {
		@apply flex-col items-start;
	}

	.history-button {
		@apply rounded-full border border-ink/10 m-1 bg-white/40 px-4 py-2 text-xs font-medium text-ink/80 backdrop-blur-sm transition hover:bg-white/60 hover:text-ink active:scale-95 focus:outline-none focus:ring-2 focus:ring-ink/20 focus:ring-offset-2 focus:ring-offset-white/50;
	}

	.icon-button {
		@apply rounded-full border border-ink/10 bg-transparent px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.2em] text-ink/55 transition hover:border-ink/20 hover:text-ink focus:outline-none focus:ring-2 focus:ring-ink/20 focus:ring-offset-2 focus:ring-offset-white/50;
	}

	.chip-stack {
		@apply flex flex-wrap gap-2;
	}

	.chip {
		@apply relative flex items-center gap-2 rounded-full bg-ink/10 pl-2 pr-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-ink/70 transition-all duration-200;
	}

	.chip--green {
		@apply bg-green-500/15 ring-1 ring-green-500/30 text-green-700/90;
	}

	.chip--blue {
		@apply bg-blue-500/15 ring-1 ring-blue-500/30 text-blue-700/90;
	}

	.chip--red {
		@apply bg-red-500/15 ring-1 ring-red-500/30 text-red-700/90;
	}

	.chip-content {
		@apply flex items-center gap-1.5;
	}

	.chip-roman {
		@apply inline-flex items-center justify-center w-5 h-5 text-[10px] font-bold rounded-full bg-white/90 text-ink/90 border border-ink/10 shadow-sm;
	}

	.chip-text {
		@apply tracking-[0.2em];
	}

	.drag-handle {
		@apply cursor-grab active:cursor-grabbing flex items-center justify-center w-4 h-4 text-ink/30 hover:text-ink/60 transition-colors;
	}

	.drag-handle--list {
		@apply absolute right-4 top-4 w-6 h-6 text-ink/20 hover:text-ink/40;
	}

	.list-item--stack {
		@apply flex-col items-start relative;
	}

	.list-item-text {
		@apply pr-8;
	}

	.drag-ghost {
		@apply opacity-40 scale-95 grayscale;
	}

	.drag-chosen {
		@apply shadow-lg ring-2 ring-ink/10 bg-white/90;
	}

	.drag-item {
		@apply opacity-100;
	}


	.empty-state {
		@apply rounded-2xl border border-dashed border-ink/15 bg-white/60 px-4 py-4 text-xs uppercase tracking-[0.2em] text-ink/40;
	}

	.glow-orb {
		@apply absolute rounded-full blur-3xl;
		background: radial-gradient(circle, rgba(90, 106, 255, 0.2), rgba(90, 106, 255, 0));
		filter: blur(60px);
	}

	.glow-orb--one {
		@apply left-[-12%] top-[-10%] h-[320px] w-[320px];
	}

	.glow-orb--two {
		@apply right-[-10%] top-[10%] h-[420px] w-[420px];
		background: radial-gradient(circle, rgba(61, 201, 166, 0.22), rgba(61, 201, 166, 0));
	}

	.glow-orb--three {
		@apply bottom-[-18%] left-[20%] h-[380px] w-[380px];
		background: radial-gradient(circle, rgba(255, 199, 94, 0.18), rgba(255, 199, 94, 0));
	}

	.history-scroll-container {
		@apply overflow-x-auto flex-1 min-w-0;
		scrollbar-width: none; /* Firefox */
		-ms-overflow-style: none; /* Internet Explorer 10+ */
		-webkit-overflow-scrolling: touch; /* 改善 iOS 滾動 */
	}
	.history-scroll-container::-webkit-scrollbar {
		display: none; /* Safari and Chrome */
	}
	#historyButtons {
		@apply flex gap-2 flex-nowrap;
		min-width: min-content;
	}

	/* Modal Styles */
	:root {
		--modal-width: 400px;
		--modal-max-height: 500px;
		--modal-top: 50px;
		--modal-right: 20px;
	}

	.modal-backdrop {
		@apply fixed inset-0 z-[90] bg-ink/10 backdrop-blur-[2px] transition-opacity duration-300;
	}

	.modal-backdrop.hidden {
		@apply pointer-events-none opacity-0;
	}

	.modal-container {
		@apply fixed z-[100] flex flex-col overflow-hidden rounded-[24px] border border-white/60 bg-white/80 shadow-[var(--shadow-soft)] backdrop-blur-2xl transition-all duration-300 ease-out;
		width: var(--modal-width);
		max-height: var(--modal-max-height);
		top: var(--modal-top);
		right: var(--modal-right);
	}

	.modal-container.hidden {
		@apply pointer-events-none translate-y-4 opacity-0 scale-95;
	}

	.modal-header {
		@apply flex cursor-default items-center justify-between border-b border-white/40 bg-white/30 px-5 py-3 backdrop-blur-md;
	}

	.modal-content {
		@apply flex-1 overflow-y-auto p-6;
		scrollbar-width: thin;
		scrollbar-color: rgba(27, 29, 32, 0.1) transparent;
	}

	.modal-content::-webkit-scrollbar {
		width: 4px;
	}

	.modal-content::-webkit-scrollbar-thumb {
		@apply rounded-full bg-ink/10;
	}

	.modal-control-btn {
		@apply flex h-7 w-7 items-center justify-center rounded-full text-lg font-medium text-ink/40 transition hover:bg-ink/5 hover:text-ink active:scale-90;
	}

	.modal-container.dragging {
		@apply shadow-[0_20px_60px_rgba(15,23,42,0.2)] ring-2 ring-ink/10;
		cursor: grabbing;
	}

	.modal-container--minimized {
		@apply h-auto;
		min-height: 44px;
	}

	.modal-container--minimized .modal-content {
		@apply hidden;
	}

	@media (max-width: 640px) {
		.modal-container {
			@apply inset-x-4 bottom-4 top-auto w-auto max-h-[70vh];
			--modal-right: 1rem;
			touch-action: none;
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			user-select: none;
		}

		.modal-container.dragging {
			@apply transition-none;
		}

		.modal-header {
			@apply px-4 py-3;
			touch-action: none;
			min-height: 44px; /* Minimum touch target size */
		}

		.drag-handle {
			@apply touch-manipulation w-5 h-5;
			min-width: 44px;
			min-height: 44px;
			padding: 12px; /* Larger touch target */
		}

		.modal-control-btn {
			@apply h-8 w-8 text-base;
			min-width: 44px;
			min-height: 44px;
		}

		.modal-content {
			@apply p-4;
		}

		.chip-stack {
			@apply gap-1.5;
		}

		.chip {
			@apply text-[10px] px-2 py-1;
		}

		.chip-roman {
			@apply w-4 h-4 text-[9px];
		}
	}
}
